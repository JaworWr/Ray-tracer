\documentclass[11pt,a4paper]{article}

\usepackage[T1]{fontenc}
\usepackage[utf8]{inputenc}
\usepackage[polish]{babel}

\setlength\parindent{0px}

\title{\vspace{-2.0cm}\textbf{Projekt: rendering obrazów - dokumentacja}}
\author{Michał Jaworski}
\begin{document}
\maketitle
\section{Używanie programu}
Program należy wywołać z wiersza poleceń podając jako argument plik zawierający opis sceny. Po uruchomieniu, jeśli plik został prawidłowo wczytany, program wyświetli wygenerowany obraz oraz zapisze go w formacie BMP.
\section{Format opisu sceny}
Opis sceny wczytywany jest z pliku tekstowego w opisanym niżej formacie.
\begin{itemize}
\item Wiersze rozpoczynające się od znaku \# są traktowane jako komentarze i ignorowane przez parser.
\item Wielkość liter w słowach kluczowych nie ma znaczenia
\item Wektory oraz punkty w przestrzeni trójwymiarowej przedstawione są jako trzy liczby rzeczywiste oddzielone białymi znakami
\item W podobny sposób reprezentowane są kolory w postaci RGB, kolejne liczby oznaczają wartości na odpowiednich kanałach
\item W parserze zdefiniowano również stałe reprezentujące podstawowe kolory. Są to: \textit{black}, \textit{white}, \textit{red}, \textit{green}, \textit{blue}, \textit{cyan}, \textit{magenta} oraz \textit{yellow}
\end{itemize}
Plik tekstowy opisujący scenę składa się z następujących części:
\begin{enumerate}
\item\textbf{Nagłówek} (obowiązkowy), każda z poniższych informacji poprzedzona jest odpowiednim słowem kluczowym:
\begin{itemize}
\item\textit{imWidth} oraz \textit{imWeight}: liczby całkowite reprezentujące odpowiednio szerokość oraz wysokość obrazka w pikselach, podanych jako liczby całkowite
\item\textit{canvWidth} oraz \textit{canvHeight}: liczby rzeczywiste reprezentujące odpowiednio szerokość oraz wysokość prostokąta, przez który obserwowana jest scena. podanych jako liczby całkowite
\item\textit{depth}: liczba rzeczywista reprezentująca odległość ogniska od prostokąta
\item\textit{bgcolor}: opcjonalny parametr oznaczający kolor tła. Domyślnie jest to kolor czarny
\item\textit{raydepth}: opcjonalny parametr określający maksymalną głębokość rekursji podczas śledzenia promieni. Domyślną wartością jest 4
\end{itemize}
\item\textbf{Źródła światła} (opcjonalne). Lista źródeł światła rozpoczynająca się słowem kluczowym \textit{lights}. Dostępne są następujące źródła światła:
\begin{itemize}
\item\textit{directional i c d}: kierunkowe źródło światła o intensywności wyznaczonej przez liczbę rzeczywistą \textit{i}, o kolorze \textit{c}, świecące w kierunku wskazywanym przez wektor \textit{d}
\item\textit{spherical i c x}: punktowe źródło światła o intensywności \textit{i}, kolorze \textit{c}, znajdujące się w punkcie \textit{x}
\end{itemize}
\item\textbf{Obiekty} (opcjonalne). Lista znajdujących się na scenie obiektów. Każdy obiekt przedstawiony jest w postaci \textit{kształt powierzchnia}. Program udostępnia następujące kształty:
\begin{itemize}
\item\textit{sphere x r}: kula o środku \textit{x} i promieniu \textit{r}
\item\textit{plane x d}: płaszczyzna zawierająca punkt \textit{x} o wektorze normalnym równoległym do wektora \textit{d}
\end{itemize}
oraz następujące rodzaje powierzchni:
\begin{itemize}
\item\textit{diffusive c}: powierzchnia rozpraszająca światło, w kolorze \textit{c}
\item\textit{reflective}: powierzchnia odbijająca światło
\item\textit{luminous c}: powierzchnia świecąca własnym światłem, w kolorze \textit{c}
\item\textit{mixed $t_{1}\ s_{1}\ [t_{2}]\ [s_{2}]$ ...}: powierzchnia mieszana, gdzie wartości \textit{$t_{i}$} wyznaczają proporcje, a \textit{$s_{i}$} to mieszane rodzaje powierzchni
\end{itemize}
\end{enumerate}
\section{Dokumentacja kodu}
\subsection{Datatypes.hs}
Plik zawiera definicje podstawowych typów danych wykorzystywanych w programie
\begin{itemize}
\item\textit{Vector} - typ danych reprezentujący wektory w przestrzeni trójwymiarowej.\\Konstruktor:
\begin{itemize}
\textit{Vector :: Double -> Double -> Double} - tworzy wektor o podanych współrzędnych
\end{itemize}
\item\textit{(+.) :: Vector -> Vector -> Vector} - operator dodawania wektorów
\item\textit{(-.) :: Vector -> Vector -> Vector} - operator odejmowania wektorów
\item\textit{times :: Double -> Vector -> Vector} - mnożenie wektora przez skalar
\item\textit{dot :: Vector -> Vector -> Double} - iloczyn skalarny wektorów
\item\textit{sqVecLen :: Vector -> Double} - kwadrat długości danego wektora
\item\textit{vecLen :: Vector -> Double} - długość danego wektora
\item\textit{normalize :: Vector -> Vector} - normalizuje wektor, tzn. zwraca wektor o długości 1 zwrócony w tym samym kierunku co dany wektor
\item\textit{Color t} - klasa reprezentacji kolorów
\begin{itemize}
\item\textit{cAdd :: t -> t -> t} - suma kolorów
\item\textit{cTimes :: Double -> t -> t} - mnożenie koloru przez skalar
\item\textit{cMult :: t -> t -> t} - iloczyn kolorów
\item\textit{toWordList :: t -> [Word8]} - zamiana koloru na tablicę 4 wartości typu Word8, reprezentujących kolor w formacie RGBA32
\item\textit{black :: t, white :: t} - stałe reprezentujące odpowiednio czerń i biel
\item Instancje: \textit{Double}, \textit{Vector}
\end{itemize}
\item\textit{Greyscale} - alias typu Double, reprezentacja odcieni szarości
\item\textit{RGB} - alias typu Vector, reprezentacja kolorów w postaci RGB
\item\textit{makeRGB :: Double -> Double -> Double -> RGB} - alias konstruktora \textit{Vector}
\item\textit{red :: RGB, green :: RGB, blue :: RGB, cyan :: RGB, magenta :: RGB, yellow :: RGB} - stałe reprezentujące odpowiednio czerwień, zieleń,  błękit, cyjan, fuksję i żółć
\end{itemize}
\subsection{Geometry.hs}
Plik zawiera typy danych do reprezentacji geometrii obiektów w przestrzeni trójwymiarowej oraz funkcje umożliwiające m. in. wyznaczanie punktów przecięcia promieni z obiektem czy promieni odbitych
\begin{itemize}
\item\textit{eps :: Double} - stała reprezentująca odległość, o którą zostanie przemieszczony początek promieni odbitych oraz promieni wyznaczających cień
\end{itemize}
\end{document}